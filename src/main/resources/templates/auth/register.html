<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>HealthBook - Inscription</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-body">
                        <h2 class="card-title text-center">üìù Inscription</h2>
                        
                        <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>
                        <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>

                        <form th:action="@{/register}" method="post">
                            <!-- Informations de connexion -->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="email" class="form-label">Email *</label>
                                        <input type="email" class="form-control" id="email" name="email" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="password" class="form-label">Mot de passe *</label>
                                        <input type="password" class="form-control" id="password" name="password" required>
                                    </div>
                                </div>
                            </div>

                            <!-- Informations personnelles -->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="nom" class="form-label">Nom *</label>
                                        <input type="text" class="form-control" id="nom" name="nom" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="prenom" class="form-label">Pr√©nom *</label>
                                        <input type="text" class="form-control" id="prenom" name="prenom" required>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="telephone" class="form-label">T√©l√©phone</label>
                                        <input type="tel" class="form-control" id="telephone" name="telephone">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="dateNaissance" class="form-label">Date de naissance</label>
                                        <input type="date" class="form-control" id="dateNaissance" name="dateNaissance">
                                    </div>
                                </div>
                            </div>

                            <!-- R√¥le et sp√©cialit√© (si m√©decin) -->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="role" class="form-label">R√¥le *</label>
                                        <select class="form-control" id="role" name="role" required onchange="toggleSpecialite()">
                                            <option value="">Choisir un r√¥le</option>
                                            <option value="PATIENT">Patient</option>
                                            <option value="MEDECIN">M√©decin</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3" id="specialiteField" style="display: none;">
                                        <label for="specialite" class="form-label">Sp√©cialit√© *</label>
                                        <input type="text" class="form-control" id="specialite" name="specialite" placeholder="Cardiologie, G√©n√©raliste...">
                                    </div>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-success w-100">S'inscrire</button>
                        </form>
                        
                        <div class="text-center mt-3">
                            <a th:href="@{/login}">D√©j√† un compte ? Se connecter</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleSpecialite() {
            const role = document.getElementById('role').value;
            const specialiteField = document.getElementById('specialiteField');
            
            if (role === 'MEDECIN') {
                specialiteField.style.display = 'block';
                document.getElementById('specialite').required = true;
            } else {
                specialiteField.style.display = 'none';
                document.getElementById('specialite').required = false;
            }
        }
    </script>
</body>
</html>